# 公共表设计

## t_marine_order（海运单表）

**表说明**：海运订单主表，记录海运订单的基本信息和状态

**完整字段**：

| 字段名                 | 类型         | 说明                          | 备注                       |
| ---------------------- | ------------ | ----------------------------- | -------------------------- |
| order_id               | BIGINT       | 主键ID                        | 自增                       |
| order_no               | VARCHAR(50)  | 订单号                        | 唯一                       |
| platform_audit_status  | TINYINT      | 平台审核状态                  | 0-待审核，1-已通过，2-驳回 |
| merge_group_no         | VARCHAR(20)  | 并单组编号                    | 格式：VB+YYYYMMDD+4位序号  |
| country                | VARCHAR(50)  | 国别                          | 美国/加拿大/英国/德国/日本 |
| order_type             | VARCHAR(20)  | 订单类型                      | 非自发/自发/LOCAL          |
| order_status           | VARCHAR(50)  | 订单状态                      | 待分区/待排船/海运中...    |
| create_time            | DATETIME     | 创建时间                      |                            |
| update_time            | DATETIME     | 更新时间                      |                            |
| create_by              | VARCHAR(128) | 创建人                        |                            |
| last_update_by         | VARCHAR(128) | 更新人                        |                            |

**索引**：
- PRIMARY KEY (order_id)
- UNIQUE KEY uk_order_no (order_no)
- INDEX idx_merge_group_no (merge_group_no)
- INDEX idx_order_status (order_status)
- INDEX idx_country (country)

## t_receipt_order（入库单表）

**表说明**：入库订单主表，记录入库单的基本信息和清关状态

**完整字段**：

| 字段名                   | 类型         | 说明                          | 备注                          |
| ------------------------ | ------------ | ----------------------------- | ----------------------------- |
| receipt_order_id         | BIGINT       | 主键ID                        | 自增                          |
| order_no                 | VARCHAR(50)  | 订单号                        | 唯一                          |
| marine_order_id          | BIGINT       | 关联海运单ID                  | 外键：t_marine_order.order_id |
| merge_clearance_group_no | VARCHAR(20)  | 合并清关组编号                | 格式：CM+YYYYMMDD+4位序号     |
| split_clearance_group_no | VARCHAR(20)  | 拆分清关组编号                | 格式：CS+YYYYMMDD+4位序号     |
| supplier_name            | VARCHAR(100) | 供货商名称                    |                               |
| clearance_status         | VARCHAR(50)  | 清关状态                      |                               |
| warehouse_status         | VARCHAR(50)  | 仓库状态                      |                               |
| create_time              | DATETIME     | 创建时间                      |                               |
| update_time              | DATETIME     | 更新时间                      |                               |

**索引**：
- PRIMARY KEY (receipt_order_id)
- UNIQUE KEY uk_order_no (order_no)
- INDEX idx_marine_order_id (marine_order_id)
- INDEX idx_merge_clearance_group_no (merge_clearance_group_no)
- INDEX idx_split_clearance_group_no (split_clearance_group_no)
- INDEX idx_supplier_name (supplier_name)

## t_user（用户表）

**表说明**：系统用户表，记录用户基本信息

**完整字段**：

| 字段名      | 类型         | 说明         | 备注     |
| ----------- | ------------ | ------------ | -------- |
| user_id     | BIGINT       | 主键ID       | 自增     |
| username    | VARCHAR(50)  | 用户名       | 唯一     |
| phone       | VARCHAR(20)  | 手机号       | 唯一     |
| email       | VARCHAR(100) | 邮箱         | 唯一     |
| password    | VARCHAR(100) | 密码         | BCrypt  |
| nickname    | VARCHAR(50)  | 昵称         |          |
| status      | TINYINT      | 状态         | 1-正常，0-冻结，-1-删除 |
| create_time | DATETIME     | 创建时间     |          |
| update_time | DATETIME     | 更新时间     |          |

**索引**：
- PRIMARY KEY (user_id)
- UNIQUE KEY uk_username (username)
- UNIQUE KEY uk_phone (phone)
- UNIQUE KEY uk_email (email)

## t_login_log（登录日志表）

**表说明**：用户登录日志，记录所有登录尝试

**完整字段**：

| 字段名       | 类型         | 说明           | 备注   |
| ------------ | ------------ | -------------- | ------ |
| log_id       | BIGINT       | 主键ID         | 自增   |
| user_id      | BIGINT       | 用户ID         |        |
| login_time   | DATETIME     | 登录时间       |        |
| login_ip     | VARCHAR(50)  | 登录IP         |        |
| login_status | TINYINT      | 登录状态       | 1-成功，0-失败 |
| fail_reason  | VARCHAR(200) | 失败原因       |        |
| user_agent   | VARCHAR(500) | 浏览器信息     |        |

**索引**：
- PRIMARY KEY (log_id)
- INDEX idx_user_id (user_id)
- INDEX idx_login_time (login_time)
